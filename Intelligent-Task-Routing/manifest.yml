modules:
  # Issue event listener for intelligent routing
  function:
    - key: issue-event-handler
      handler: src/index.issueEventHandler

  # Event triggers
  trigger:
    - key: issue-created-trigger
      function: issue-event-handler
      events:
        - avi:jira:created:issue
    - key: issue-updated-trigger
      function: issue-event-handler
      events:
        - avi:jira:updated:issue

function:
  - key: issue-event-handler
    handler: src/index.issueEventHandler

permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - read:jira-user
    - manage:jira-configuration
  external:
    fetch:
      backend:
        - api.openai.com
        - api.anthropic.com
        - generativelanguage.googleapis.com

app:
  runtime:
    name: nodejs20.x
  id: ari:cloud:ecosystem::app/8add8f8e-bcb6-45f1-8246-d6f032b6e62b
